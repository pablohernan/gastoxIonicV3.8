{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HomePage } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomePage),\r\n  ],\r\n  exports: [\r\n    HomePage\r\n  ]\r\n})\r\nexport class HomePageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, AlertController} from 'ionic-angular';\r\n//import { AngularFireList, AngularFireDatabase } from 'angularfire2/database';\r\n//import { Observable } from 'rxjs/Observable';\r\nimport { FormPage } from '../form/form';\r\nimport { SincPage } from '../sinc/sinc';\r\nimport { LocalData } from '../utils/local-data';\r\nimport { DataUtils } from '../utils/data-utils';\r\nimport { Format } from '../utils/format';\r\n//import { DateFormatPipe } from 'angular2-moment';\r\n\r\n@IonicPage()\r\n@Component({\r\n  templateUrl: 'home.html',\r\n  selector: 'app', // 'page-home',\r\n  //pipes: [DateFormatPipe],\r\n  providers: [LocalData,DataUtils,Format]\r\n})\r\nexport class HomePage {\r\n  // tasksRef: AngularFireList<any>;\r\n  // tasks: Observable<any[]>;\r\n  localList : Array<any>;\r\n  serverList : Array<any>;\r\n  total : String;\r\n  utimosDias : number;\r\n  precio : any;\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public alertCtrl: AlertController, \r\n    public ld:LocalData, \r\n    public dUtils:DataUtils, \r\n    public fmt:Format) {\r\n\r\n     if(! JSON.parse(localStorage.getItem('categorias')) )\r\n         this.sincronizar();\r\n\r\n     this.initializeItems(); \r\n\r\n  }\r\n\r\n  //this function will be called every time you enter the view\r\n  ionViewWillEnter() {\r\n      this.ld.updateLocalList();\r\n      this.ld.updateServerList();\r\n      this.initializeItems();   \r\n  }  \r\n\r\n\r\n  initializeItems() {\r\n      this.localList = this.ld.getLocalList();\r\n      this.serverList = this.ld.getSeverList();\r\n      this.updateTotal();\r\n      if( this.ld.getItem('utimosDias') )\r\n        this.utimosDias = this.ld.getItem('utimosDias')[0];\r\n      else   \r\n        this.utimosDias = 30; \r\n  }\r\n\r\n\r\n  getItems(ev: any) {\r\n    // Reset items back to all of the items\r\n    this.initializeItems();\r\n    \r\n    // set val to the value of the searchbar\r\n    let val = ev.target.value;\r\n\r\n    // if the value is an empty string don't filter the items\r\n    if (val && val.trim() != '') {\r\n      this.localList  = this.localList.filter((item) => {\r\n        return (item.nombre.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.precio.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.categoria.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.metodo.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.descripcion.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.lugar.toLowerCase().indexOf(val.toLowerCase()) > -1);\r\n      });\r\n\r\n      this.serverList = this.serverList.filter((item) => {\r\n        return (item.nombre.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.precio.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.categoria.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.metodo.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.descripcion.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\r\n               (item.lugar.toLowerCase().indexOf(val.toLowerCase()) > -1);\r\n\r\n      });\r\n\r\n      this.updateTotal();\r\n\r\n    }\r\n\r\n  }  \r\n\r\n  updateTotal(){\r\n\r\n    var total = 0;\r\n    for (var index in this.localList) {\r\n        var valor:number = 0;\r\n        if( !isNaN(parseFloat(this.localList[index].precio)) ){\r\n          valor= parseFloat(this.localList[index].precio);\r\n          //console.log( 'valor: ' + valor );\r\n          total = total + valor;\r\n        }  \r\n    }\r\n\r\n    for (var index2 in this.serverList) {\r\n        var valor2:number = 0;\r\n        if( !isNaN(parseFloat(this.serverList[index2].precio)) ){\r\n          valor2= parseFloat(this.serverList[index2].precio);\r\n          //console.log( 'valor: ' + valor );\r\n          total = total + valor2;\r\n        }  \r\n    }\r\n    //console.log( total.toFixed(2) );\r\n\r\n    this.total = total.toFixed(2); \r\n\r\n  }\r\n\r\n  sincronizar(){\r\n    this.navCtrl.push(SincPage);\r\n  }\r\n\r\n  //Nuevo , Copiar , Editar, Delete\r\n  newG(){\r\n    this.navCtrl.push(FormPage, {\r\n        action: 'new'\r\n      })\r\n  }\r\n\r\n  copy(item){\r\n      this.navCtrl.push(FormPage, {\r\n        item: item,\r\n        action: 'copy'\r\n      })\r\n  }\r\n\r\n  edit(item){\r\n      this.navCtrl.push(FormPage, {\r\n        item: item,\r\n        action: 'edit'\r\n      })\r\n  }  \r\n\r\n  del(item){\r\n      this.navCtrl.push(FormPage, {\r\n        item: item,\r\n        action: 'del'\r\n      })\r\n  }    \r\n\r\n\r\n\r\n  msgAction( item ) {\r\n      //console.log(task.key)\r\n      let confirm = this.alertCtrl.create({\r\n        title: 'Que desea hacer?',\r\n        buttons: [\r\n          {\r\n            text: 'Copiar',\r\n            handler: () => {\r\n              this.copy(item);\r\n            }\r\n          },\r\n          {\r\n            text: 'Editar',\r\n            handler: () => {\r\n              this.edit(item);\r\n            }\r\n          },\r\n          {\r\n            text: 'Eliminar',\r\n            handler: () => {\r\n              this.del(item);\r\n            }\r\n          }\r\n        ]\r\n      });\r\n      confirm.present();\r\n  }\r\n\r\n\r\n\r\n\r\n  getIconItem(action){\r\n    \r\n      switch(action) {  \r\n         case 'del': { \r\n            return 'trash'; \r\n         }; \r\n         case 'edit': { \r\n            return 'create';  \r\n         } \r\n         case 'new': { \r\n            return 'laptop';  \r\n         }                   \r\n         default: {  // add\r\n            return 'cloud-done'; \r\n         } \r\n      } \r\n       /*   */\r\n\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}